{"openapi":"3.1.0","info":{"title":"Receipt Manager API","description":"Turning crumpled paper chaos into digital order","version":"0.1.0"},"paths":{"/auth/login":{"post":{"tags":["Auth"],"summary":"Login","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/refresh":{"post":{"tags":["Auth"],"summary":"Refresh Token Endpoint","operationId":"refresh_token_endpoint_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/receipts/process":{"post":{"tags":["Receipts"],"summary":"Process Receipt Image","description":"Upload a receipt image, store it in Cloudinary, and start processing with Gemini LLM","operationId":"process_receipt_image_receipts_process_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_process_receipt_image_receipts_process_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReceiptProcessingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/receipts/{receipt_id}":{"get":{"tags":["Receipts"],"summary":"Get Receipt By Id","description":"Get a specific receipt by ID","operationId":"get_receipt_by_id_receipts__receipt_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"receipt_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Receipt Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReceiptResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Receipts"],"summary":"Update Receipt By Id","description":"Update a receipt","operationId":"update_receipt_by_id_receipts__receipt_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"receipt_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Receipt Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReceiptUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReceiptResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/receipts/":{"get":{"tags":["Receipts"],"summary":"List User Receipts","description":"Get all receipts for the current user with pagination","operationId":"list_user_receipts_receipts__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_ReceiptListResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/receipts/search/":{"get":{"tags":["Receipts"],"summary":"Search User Receipts","description":"Search receipts with filters","operationId":"search_user_receipts_receipts_search__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"merchant","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Merchant"}},{"name":"min_total","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Min Total"}},{"name":"max_total","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Max Total"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReceiptResponse"},"title":"Response Search User Receipts Receipts Search  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/receipts/search/category/{category}":{"get":{"tags":["Receipts"],"summary":"Search Receipts By Item Category","description":"Search receipts by item category","operationId":"search_receipts_by_item_category_receipts_search_category__category__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category","in":"path","required":true,"schema":{"type":"string","title":"Category"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReceiptResponse"},"title":"Response Search Receipts By Item Category Receipts Search Category  Category  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/receipts/statistics/":{"get":{"tags":["Receipts"],"summary":"Get User Receipt Statistics","description":"Get receipt statistics for the current user","operationId":"get_user_receipt_statistics_receipts_statistics__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/tasks/":{"get":{"tags":["Tasks"],"summary":"List User Tasks","description":"Get all receipt processing tasks for the current user with pagination","operationId":"list_user_tasks_tasks__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_TaskListResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tasks/{task_id}":{"get":{"tags":["Tasks"],"summary":"Get Task Status","description":"Get the status of a specific task","operationId":"get_task_status_tasks__task_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_process_receipt_image_receipts_process_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_process_receipt_image_receipts_process_post"},"BuyerInfo":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"taxId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Taxid"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"zipCode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zipcode"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"}},"type":"object","required":["name","taxId","address","zipCode","city","state","country","phone","email"],"title":"BuyerInfo"},"Discount":{"properties":{"description":{"type":"string","title":"Description"},"amount":{"type":"number","title":"Amount"},"currency":{"type":"string","title":"Currency"}},"type":"object","required":["description","amount","currency"],"title":"Discount"},"ExchangeRate":{"properties":{"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"rate":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rate"},"equivalentAmount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Equivalentamount"}},"type":"object","title":"ExchangeRate"},"FinancialSummary":{"properties":{"subtotal":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Subtotal"},"taxAmount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Taxamount"},"finalTotal":{"type":"number","title":"Finaltotal"},"currency":{"type":"string","title":"Currency"}},"type":"object","required":["finalTotal","currency"],"title":"FinancialSummary"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Location":{"properties":{"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"zipCode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zipcode"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"}},"type":"object","title":"Location"},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest"},"LoginResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"refresh_token":{"type":"string","title":"Refresh Token"},"expires_in":{"type":"integer","title":"Expires In"},"expires_at":{"type":"integer","title":"Expires At"}},"type":"object","required":["access_token","refresh_token","expires_in","expires_at"],"title":"LoginResponse"},"MerchantInfo":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"taxId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Taxid"},"additionalInfo":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Additionalinfo"}},"type":"object","title":"MerchantInfo"},"PaginatedResponse_ReceiptListResponse_":{"properties":{"items":{"items":{"$ref":"#/components/schemas/ReceiptListResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","limit","offset","has_more"],"title":"PaginatedResponse[ReceiptListResponse]"},"PaginatedResponse_TaskListResponse_":{"properties":{"items":{"items":{"$ref":"#/components/schemas/TaskListResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"offset":{"type":"integer","title":"Offset"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["items","total","limit","offset","has_more"],"title":"PaginatedResponse[TaskListResponse]"},"PaymentInfo":{"properties":{"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"terminalId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Terminalid"},"transactionId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transactionid"},"slip":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Slip"},"bankCardType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bankcardtype"}},"type":"object","title":"PaymentInfo"},"ProcessingStatus":{"type":"string","enum":["pending","processing","completed","failed"],"title":"ProcessingStatus"},"ReceiptData":{"properties":{"isValid":{"type":"boolean","title":"Isvalid"},"merchantInfo":{"$ref":"#/components/schemas/MerchantInfo"},"location":{"$ref":"#/components/schemas/Location"},"buyerInfo":{"anyOf":[{"$ref":"#/components/schemas/BuyerInfo"},{"type":"null"}]},"dateTime":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Datetime"},"items":{"items":{"$ref":"#/components/schemas/ReceiptItem"},"type":"array","title":"Items"},"financialSummary":{"$ref":"#/components/schemas/FinancialSummary"},"taxDetails":{"anyOf":[{"items":{"$ref":"#/components/schemas/TaxDetail"},"type":"array"},{"type":"null"}],"title":"Taxdetails"},"discounts":{"anyOf":[{"items":{"$ref":"#/components/schemas/Discount"},"type":"array"},{"type":"null"}],"title":"Discounts"},"serviceCharge":{"anyOf":[{"$ref":"#/components/schemas/ServiceCharge"},{"type":"null"}]},"paymentInfo":{"$ref":"#/components/schemas/PaymentInfo"},"exchangeRate":{"anyOf":[{"$ref":"#/components/schemas/ExchangeRate"},{"type":"null"}]},"notes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Notes"},"handwrittenNotes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Handwrittennotes"}},"type":"object","required":["isValid","merchantInfo","location","items","financialSummary","paymentInfo"],"title":"ReceiptData"},"ReceiptItem":{"properties":{"description":{"type":"string","title":"Description"},"itemCode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Itemcode"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"unitPrice":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Unitprice"},"quantity":{"type":"number","title":"Quantity"},"lineTotal":{"type":"number","title":"Linetotal"},"currency":{"type":"string","title":"Currency"}},"type":"object","required":["description","quantity","lineTotal","currency"],"title":"ReceiptItem"},"ReceiptListResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"merchant":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Merchant"},"total":{"type":"number","title":"Total"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","user_id","total","date","created_at"],"title":"ReceiptListResponse"},"ReceiptProcessingResponse":{"properties":{"task_id":{"type":"string","format":"uuid","title":"Task Id"},"status":{"$ref":"#/components/schemas/ProcessingStatus"},"message":{"type":"string","title":"Message"}},"type":"object","required":["task_id","status","message"],"title":"ReceiptProcessingResponse"},"ReceiptResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"receipt_data":{"$ref":"#/components/schemas/ReceiptData"},"merchant":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Merchant"},"total":{"type":"number","title":"Total"},"date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","user_id","receipt_data","total","date","created_at"],"title":"ReceiptResponse"},"ReceiptUpdate":{"properties":{"receipt_data":{"anyOf":[{"$ref":"#/components/schemas/ReceiptData"},{"type":"null"}]},"image_url":{"anyOf":[{"type":"string","maxLength":2083,"minLength":1,"format":"uri"},{"type":"null"}],"title":"Image Url"}},"type":"object","title":"ReceiptUpdate"},"RefreshRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshRequest"},"ServiceCharge":{"properties":{"percentage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Percentage"},"amount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Amount"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"}},"type":"object","title":"ServiceCharge"},"TaskListResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"status":{"$ref":"#/components/schemas/ProcessingStatus"},"receipt_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Receipt Id"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"llm_error":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Llm Error"}},"type":"object","required":["id","user_id","status","created_at","updated_at"],"title":"TaskListResponse"},"TaskStatusResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id","description":"The task ID"},"user_id":{"type":"string","format":"uuid","title":"User Id"},"status":{"$ref":"#/components/schemas/ProcessingStatus"},"receipt_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Receipt Id"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"exception_details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Exception Details"}},"type":"object","required":["id","user_id","status","created_at","updated_at"],"title":"TaskStatusResponse"},"TaxDetail":{"properties":{"rate":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rate"},"taxableAmount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Taxableamount"},"taxAmount":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Taxamount"},"totalWithTax":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Totalwithtax"},"currency":{"type":"string","title":"Currency"}},"type":"object","required":["currency"],"title":"TaxDetail"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}